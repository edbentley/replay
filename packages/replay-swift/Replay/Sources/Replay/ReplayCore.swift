// Swift 5.3 will support Package resources like a JS file
// https://github.com/apple/swift-evolution/blob/master/proposals/0271-package-manager-resources.md
// Until then, we'll just copy replay-core.js as a string here

let replayCoreJsString = """
var replay=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t,e,r,n){const p=r||game.Game(game.gameProps),c=({x:t,y:e})=>({x:t,y:e}),u=t.getGetDevice(),l=u(c),d=a(p,u(c),0),f=n||p.props.size,h=s(l.size,f);let y=0,v=0,m=i(d,p.props,u,c,!0,h,0,1,p.props.id,e);return{initTextures:m,getNextFrameTextures(r,n){const a=r-y;for(y=r,v+=a;v>=o;){v-=o;const r=v/o,a=t.getGetDevice(),u=s(a(c).size,f);m=i(d,p.props,a,c,!1,u,r,1,p.props.id,e),n()}return m}}}function i(t,e,r,n,o,s,u,l,d,f){const h={x:(y=e).x||0,y:y.y||0,rotation:y.rotation||0,opacity:Math.min(1,Math.max(0,null!==(v=y.opacity)&&void 0!==v?v:1)),scaleX:null!==(m=y.scaleX)&&void 0!==m?m:1,scaleY:null!==(g=y.scaleY)&&void 0!==g?g:1,anchorX:y.anchorX||0,anchorY:y.anchorY||0,mask:y.mask||null};var y,v,m,g;h.opacity*=l;const{nativeSpriteMap:x,nativeSpriteUtils:b}=f,S=t=>{const e=n(t);return c(h)(e)},X=r(S),M=t.getSprites(e,X,o,s,u),L=[],P=M.map(e=>{if(!e)return e;if("native"===e.type){L.push(e.props.id);const r=x[e.name];if(!r)throw Error(`Cannot find Native Sprite "${e.name}"`);let n=t.childContainers[e.props.id];return n&&"native"===n.type||(n={type:"native",state:r.create({props:e.props,parentGlobalId:d,getState:()=>n.state,updateState:t=>{n.state={...n.state,...t}},utils:b}),cleanup:r.cleanup},t.childContainers[e.props.id]=n),n.state=r.loop({props:e.props,state:n.state,parentGlobalId:d,utils:b}),b.didResize=!1,null}if("custom"===e.type){L.push(e.props.id);let n=!1,o=t.childContainers[e.props.id];return o&&"custom"===o.type||(n=!0,o=a(e,X,t.prevTime),t.childContainers[e.props.id]=o),i(o,e.props,r,S,n,s,u,h.opacity,`${d}--${e.props.id}`,f)}return e}).filter(p),C=t=>{Object.keys(t).forEach(e=>{if(!L.includes(e)){const r=t[e];"native"===r.type?r.cleanup({state:r.state,parentGlobalId:d}):C(r.childContainers),delete t[e]}})};return C(t.childContainers),{id:e.id,baseProps:h,textures:P}}r.r(e),r.d(e,"replayCore",(function(){return n})),r.d(e,"getLocalCoordsForSprite",(function(){return c}));const o=1/60*1e3;function a(t,e,r){const{spriteObj:n,props:i}=t,o=[],a=t=>{o.push(t)};let s;return n.init&&(s=n.init({props:i,device:e,updateState:a})),{type:"custom",state:s,childContainers:{},prevTime:r,currentLag:0,getSprites(t,e,r,i,s){const p=()=>{this.state=o.reduce((t,e)=>e(t),this.state),o.length=0};p(),!r&&n.loop&&(this.state=n.loop({props:t,state:this.state,device:e,updateState:a})),p();let c=n[i];c||(c="renderPXL"===i&&n.renderXL?n.renderXL:n.render);const u=c({props:t,state:this.state,device:e,updateState:a,extrapolateFactor:s});return p(),u}}}function s(t,e){const r=t.deviceHeight>t.deviceWidth;let n,i=!1;return"portrait"in e?(n=r?e.portrait:e.landscape,i=!0):n=e,n.minHeightXL&&t.deviceHeight>=n.minHeightXL||n.minWidthXL&&t.deviceWidth>=n.minWidthXL?i&&r?"renderPXL":"renderXL":i&&r?"renderP":"render"}function p(t){return null!==t}function c(t){const e=t.x,r=t.y,n=Math.PI/180,i=-(t.rotation||0)*n;return({x:n,y:o})=>{const a=(n-e)*Math.cos(i)+(o-r)*Math.sin(i),s=-(n-e)*Math.sin(i)+(o-r)*Math.cos(i),p=t.x+(a-t.x)/t.scaleX,c=t.y+(s-t.y)/t.scaleY;return{x:p+t.anchorX,y:c+t.anchorY}}}}]);
"""
