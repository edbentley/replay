// Swift 5.3 will support Package resources like a JS file
// https://github.com/apple/swift-evolution/blob/master/proposals/0271-package-manager-resources.md
// Until then, we'll just copy replay-core.js as a string here

let replayCoreJsString = """
var replay=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r){const n=t||game.Game(game.gameProps),s=({x:e,y:t})=>({x:e,y:t}),c=e.getGetDevice(),u=c(s),p=o(n,c(s),0),d=r||n.props.size,l=a(u.size,d);return{initTextures:i(p,n.props,c,s,!0,l,0,1),getNextFrameTextures(t){const r=e.getGetDevice(),o=a(r(s).size,d);return i(p,n.props,r,s,!1,o,t,1)}}}function i(e,t,r,n,a,u,p,d){const l={x:(h=t).x||0,y:h.y||0,rotation:h.rotation||0,opacity:Math.min(1,Math.max(0,null!==(f=h.opacity)&&void 0!==f?f:1)),scaleX:null!==(y=h.scaleX)&&void 0!==y?y:1,scaleY:null!==(v=h.scaleY)&&void 0!==v?v:1,anchorX:h.anchorX||0,anchorY:h.anchorY||0};var h,f,y,v;l.opacity*=d;const g=e=>{const t=n(e);return c(l)(t)},m=r(g),x=e.getSprites(t,m,a,u,p),b=[],L=x.filter(s).map(t=>{if("custom"===t.type){b.push(t.props.id);let n=!1;return e.childContainers[t.props.id]||(n=!0,e.childContainers[t.props.id]=o(t,m,e.prevTime)),i(e.childContainers[t.props.id],t.props,r,g,n,u,p,l.opacity)}return t});return Object.keys(e.childContainers).forEach(t=>{b.includes(t)||delete e.childContainers[t]}),{id:t.id,baseProps:l,textures:L}}r.r(t),r.d(t,"replayCore",(function(){return n})),r.d(t,"getLocalCoordsForSprite",(function(){return c}));function o(e,t,r){const{spriteObj:n,props:i}=e,o=[],a=e=>{o.push(e)};let s;return n.init&&(s=n.init({props:i,device:t,updateState:a})),{state:s,childContainers:{},prevTime:r,currentLag:0,getSprites(e,t,r,i,s){const c=s-this.prevTime;this.prevTime=s,this.currentLag+=c;let u=0;const p=()=>{this.state=o.reduce((e,t)=>t(e),this.state),o.length=0};if(p(),!r&&n.loop){for(;this.currentLag>=1/60*1e3;)this.state=n.loop({props:e,state:this.state,device:t,updateState:a}),this.currentLag-=1/60*1e3;u=this.currentLag/(1/60*1e3)}p();let d=n[i];d||(d="renderPXL"===i&&n.renderXL?n.renderXL:n.render);const l=d({props:e,state:this.state,device:t,updateState:a,extrapolateFactor:u});return p(),l}}}function a(e,t){const r=e.deviceHeight>e.deviceWidth;let n,i=!1;return"portrait"in t?(n=r?t.portrait:t.landscape,i=!0):n=t,n.minHeightXL&&e.deviceHeight>=n.minHeightXL||n.minWidthXL&&e.deviceWidth>=n.minWidthXL?i&&r?"renderPXL":"renderXL":i&&r?"renderP":"render"}function s(e){return null!==e}function c(e){const t=e.x,r=e.y,n=Math.PI/180,i=-(e.rotation||0)*n;return({x:n,y:o})=>{const a=(n-t)*Math.cos(i)+(o-r)*Math.sin(i),s=-(n-t)*Math.sin(i)+(o-r)*Math.cos(i),c=e.x+(a-e.x)/e.scaleX,u=e.y+(s-e.y)/e.scaleY;return{x:c+e.anchorX,y:u+e.anchorY}}}}]);
"""
